{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secure Login | Flight Monitoring Portal</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/login-page.css' %}">
</head>
<body>
<div class="login-shell">
    <div class="login-overlay"></div>

    <div class="login-frame container-fluid">
        <header class="top-ribbon">
            <div class="brand-mark" aria-hidden="true">
                <span>GAF</span>
            </div>
            <h1 class="portal-title">Flight Monitoring Portal</h1>
        </header>

        <main class="login-main">
            <section class="login-card" aria-labelledby="secure-login-title">
                <div class="lock-wrap" aria-hidden="true">
                    <svg width="34" height="34" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M7 10V7.5C7 4.73858 9.23858 2.5 12 2.5C14.7614 2.5 17 4.73858 17 7.5V10" stroke="currentColor" stroke-width="2"/>
                        <rect x="4" y="10" width="16" height="11" rx="2" stroke="currentColor" stroke-width="2"/>
                    </svg>
                </div>

                <h2 id="secure-login-title">Secure Login</h2>
                <p class="login-subtext">Access your military-grade flight data system.</p>

                {% if form.non_field_errors %}
                <div class="alert alert-danger py-2 small" role="alert">
                    {% for error in form.non_field_errors %}
                    <div>{{ error }}</div>
                    {% endfor %}
                </div>
                {% endif %}

                <form method="post" novalidate>
                    {% csrf_token %}

                    <div class="mb-3">
                        <label class="form-label" for="id_username">Username</label>
                        <input
                            type="text"
                            class="form-control {% if form.username.errors %}is-invalid{% endif %}"
                            id="id_username"
                            name="username"
                            value="{{ form.username.value|default:'' }}"
                            placeholder="Hotel-Alpha"
                            autocomplete="username"
                            required
                        >
                        {% for error in form.username.errors %}
                        <div class="invalid-feedback">{{ error }}</div>
                        {% endfor %}
                    </div>

                    <div class="mb-2">
                        <label class="form-label" for="id_password">Password</label>
                        <div class="password-wrap">
                            <input
                                type="password"
                                class="form-control {% if form.password.errors %}is-invalid{% endif %}"
                                id="id_password"
                                name="password"
                                placeholder="••••••••••••"
                                autocomplete="current-password"
                                required
                            >
                            <button class="password-toggle" type="button" id="passwordToggle" aria-label="Toggle password visibility">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M2 12C3.6 8.5 7.2 6 12 6C16.8 6 20.4 8.5 22 12C20.4 15.5 16.8 18 12 18C7.2 18 3.6 15.5 2 12Z" stroke="currentColor" stroke-width="1.8"/>
                                    <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="1.8"/>
                                </svg>
                            </button>
                        </div>
                        {% for error in form.password.errors %}
                        <div class="invalid-feedback d-block">{{ error }}</div>
                        {% endfor %}
                    </div>

                    <div class="mb-3 pt-2">
                        <a class="forgot-link" href="#" onclick="return false;">Forgot Password?</a>
                    </div>

                    {% if recaptcha_enabled %}
                    <div class="captcha-live">
                        <div class="g-recaptcha" data-sitekey="{{ recaptcha_site_key }}"></div>
                    </div>
                    {% else %}
                    <div class="captcha-disabled">
                        reCAPTCHA is not configured for this environment.
                    </div>
                    {% endif %}

                    <button class="btn login-btn w-100" type="submit">
                        Secure Login <span aria-hidden="true">→</span>
                    </button>
                </form>

                <p class="card-footer-note">© {% now "Y" %} Ghana Air Force Flight Logging System.<br>All rights reserved.</p>
            </section>
        </main>

        <footer class="bottom-ribbon">
            © {% now "Y" %} Ghana Air Force. All rights reserved.
        </footer>
    </div>
</div>

{% if recaptcha_enabled %}
<script src="https://www.google.com/recaptcha/api.js" async defer></script>
{% endif %}
<script src="{% static 'js/login-page.js' %}"></script>
</body>
</html>
